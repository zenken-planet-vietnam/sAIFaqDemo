{"remainingRequest":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/babel-loader/lib/index.js!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/ts-loader/index.js??ref--15-2!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/eslint-loader/index.js??ref--14-0!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/@core/libs/search.ts","dependencies":[{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/@core/libs/search.ts","mtime":1641890413987},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/babel.config.js","mtime":1641544761991},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/cache-loader/dist/cjs.js","mtime":1638341829149},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/babel-loader/lib/index.js","mtime":1638342835865},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/ts-loader/index.js","mtime":1638341829162},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/eslint-loader/index.js","mtime":1638342837904}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvdGhhaW5ndXllbnRhbi9Eb2N1bWVudHMvWkVOS0VOLVBMQU5FVC9zQUlGYXFEZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL3RoYWluZ3V5ZW50YW4vRG9jdW1lbnRzL1pFTktFTi1QTEFORVQvc0FJRmFxRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy90aGFpbmd1eWVudGFuL0RvY3VtZW50cy9aRU5LRU4tUExBTkVUL3NBSUZhcURlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvdGhhaW5ndXllbnRhbi9Eb2N1bWVudHMvWkVOS0VOLVBMQU5FVC9zQUlGYXFEZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3RoYWluZ3V5ZW50YW4vRG9jdW1lbnRzL1pFTktFTi1QTEFORVQvc0FJRmFxRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWxsLmpzIjsKCi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovCmltcG9ydCB0aW55U2VnbWVudGVyIGZyb20gIi4vdGlueVNlZ21lbnRlciI7Cgp2YXIgQmFzZVNlYXJjaCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQmFzZVNlYXJjaCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlU2VhcmNoKTsKICB9CgogIF9jcmVhdGVDbGFzcyhCYXNlU2VhcmNoLCBbewogICAga2V5OiAic2VhcmNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBxdWVyeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQmFzZVNlYXJjaDsKfSgpOwoKZXhwb3J0IHZhciBGdWxsVGV4dFNlYXJjaCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Jhc2VTZWFyY2gpIHsKICBfaW5oZXJpdHMoRnVsbFRleHRTZWFyY2gsIF9CYXNlU2VhcmNoKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihGdWxsVGV4dFNlYXJjaCk7CgogIGZ1bmN0aW9uIEZ1bGxUZXh0U2VhcmNoKHNjcmlwdERhdGEpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRnVsbFRleHRTZWFyY2gpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7CiAgICBfdGhpcy5zY3JpcHREYXRhID0gc2NyaXB0RGF0YTsKICAgIF90aGlzLmxldmVuV29yZHMgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9IC8vIHF1ZXJ5OiB0ZXh0IGlucHV0IGZvciBzZWFyY2gKICAvL3RhZ3MgOiBrZXl3b3JkIGZvciBzZWFyY2gKCgogIF9jcmVhdGVDbGFzcyhGdWxsVGV4dFNlYXJjaCwgW3sKICAgIGtleTogInNlYXJjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgcXVlcnkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgICB2YXIgdGFncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CgogICAgICBpZiAocXVlcnkubGVuZ3RoIDwgMSAmJiB0YWdzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBxdWVzdGlvbnM6IHRoaXMuc2NyaXB0RGF0YS5xdWVzdGlvbnMsCiAgICAgICAgICB3b3JkczogW10KICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgd29yZHMgPSB0aW55U2VnbWVudGVyLnNlZ21lbnROb25lU3BhY2UocXVlcnkpOwogICAgICB0YWdzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB3b3Jkcy5wdXNoKGVsZW1lbnQudGV4dCk7CiAgICAgIH0pOwogICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuY2hlY2tUZXh0SW5jbHVkZVdvcmRzKHdvcmRzKTsgLy8gcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgoeCwgeSkgPT4geS53ZWlnaHQgLSB4LndlaWdodCkKCiAgICAgIHZhciBxdWVzdGlvbnMgPSB0aGlzLnNjcmlwdERhdGEucXVlc3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiByZXN1bHRzLmZpbmQoZnVuY3Rpb24gKHkpIHsKICAgICAgICAgIHJldHVybiB5ID09PSB4LmlkOwogICAgICAgIH0pICE9PSB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIHF1ZXN0aW9uczogcXVlc3Rpb25zLAogICAgICAgIHdvcmRzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHdvcmRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubGV2ZW5Xb3JkcykpCiAgICAgIH07CiAgICB9IC8vIGNoZWNrIGRvY3VtZW50IGluY2x1ZGUgbGlzdCB3b3JkIAoKICB9LCB7CiAgICBrZXk6ICJjaGVja1RleHRJbmNsdWRlV29yZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrVGV4dEluY2x1ZGVXb3Jkcyh3b3JkcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciByZXN1bHRzID0gW107CgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSB3b3Jkc1tpXTsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CgogICAgICAgIGZvciAodmFyIHdvcmQgaW4gX3RoaXMyLnNjcmlwdERhdGEuaW52ZXJ0ZWRJbmRleCkgewogICAgICAgICAgdmFyIGludmVydGVkRGF0YSA9IF90aGlzMi5zY3JpcHREYXRhLmludmVydGVkSW5kZXhbd29yZF07IC8vIGNoZWNrIHN5bm9ueW0gYW5kIGFkZCBzeW5vbnltIHRvIGxpc3Qgc2VhcmNoCgogICAgICAgICAgdmFyIGlzU3lub255bSA9IF90aGlzMi5jaGVja1N5bm9ueW0oZWxlbWVudCwgaW52ZXJ0ZWREYXRhLnN5bm9ueW1zKTsKCiAgICAgICAgICBpZiAod29yZC5pbmNsdWRlcyhlbGVtZW50KSB8fCBpc1N5bm9ueW0gfHwgX3RoaXMyLmxldmVuc2h0ZWluRGlzdGFuY2Uod29yZCwgZWxlbWVudCkpIHsKICAgICAgICAgICAgaW52ZXJ0ZWREYXRhLnNjcmlwdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIHZhciBzY3JpcHQgPSByZXN1bHQuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT09IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKCFzY3JpcHQpIHJlc3VsdC5wdXNoKGl0ZW0pO2Vsc2UgaWYgKHNjcmlwdC53ZWlnaHQgPCBpdGVtLndlaWdodCkgc2NyaXB0LndlaWdodCA9IGl0ZW0ud2VpZ2h0OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpOwogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykgewogICAgICAgIF9sb29wKGkpOwogICAgICB9IC8vIHRha2UgdGhlIGpvaW50IHJlc3VsdCBwYXJ0IG9mIGFsbCByZXN1bHRzCgoKICAgICAgdmFyIGV4cGVjdFJlc3VsdHMgPSB0aGlzLmdldEdlbmVyYWxJdGVtKHJlc3VsdHMpOwogICAgICBleHBlY3RSZXN1bHRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYi53ZWlnaHQgLSBhLndlaWdodDsKICAgICAgfSk7CiAgICAgIHJldHVybiBleHBlY3RSZXN1bHRzLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4LmlkOwogICAgICB9KTsKICAgIH0gLy9nZXQgZG9jdW1lbXQgY29udGFpbnMgYWxsIHRleHQKCiAgfSwgewogICAga2V5OiAiZ2V0R2VuZXJhbEl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEdlbmVyYWxJdGVtKGl0ZW1zKSB7CiAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHJldHVybiBbXTsKICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGl0ZW1zWzBdOwogICAgICB2YXIgcmVzdWx0cyA9IFtdOwoKICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihpKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBpdGVtc1swXVtpXTsKICAgICAgICB2YXIgaXNDb250YWluID0gdHJ1ZTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBpdGVtcy5sZW5ndGg7IGorKykgewogICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tqXTsKCiAgICAgICAgICBpZiAoaXRlbS5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgIHJldHVybiB4LmlkID09IGVsZW1lbnQuaWQ7CiAgICAgICAgICB9KSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlzQ29udGFpbiA9IGZhbHNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpc0NvbnRhaW4pIHJlc3VsdHMucHVzaChlbGVtZW50KTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXNbMF0ubGVuZ3RoOyBpKyspIHsKICAgICAgICBfbG9vcDIoaSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHRzOwogICAgfSAvL2xldmVuc2h0ZWluRGlzdGFuY2UgYWxnb3JpdGhtIGNvcHkgcmlnaHQgCgogIH0sIHsKICAgIGtleTogImxldmVuc2h0ZWluRGlzdGFuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxldmVuc2h0ZWluRGlzdGFuY2UoKSB7CiAgICAgIHZhciBzdHIxID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgICAgdmFyIHN0cjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogICAgICB2YXIgdHJhY2sgPSBBcnJheShzdHIyLmxlbmd0aCArIDEpLmZpbGwobnVsbCkubWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gQXJyYXkoc3RyMS5sZW5ndGggKyAxKS5maWxsKG51bGwpOwogICAgICB9KTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHN0cjEubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB0cmFja1swXVtpXSA9IGk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSAwOyBqIDw9IHN0cjIubGVuZ3RoOyBqICs9IDEpIHsKICAgICAgICB0cmFja1tqXVswXSA9IGo7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9qID0gMTsgX2ogPD0gc3RyMi5sZW5ndGg7IF9qICs9IDEpIHsKICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDw9IHN0cjEubGVuZ3RoOyBfaSArPSAxKSB7CiAgICAgICAgICB2YXIgaW5kaWNhdG9yID0gc3RyMVtfaSAtIDFdID09PSBzdHIyW19qIC0gMV0gPyAwIDogMTsKICAgICAgICAgIHRyYWNrW19qXVtfaV0gPSBNYXRoLm1pbih0cmFja1tfal1bX2kgLSAxXSArIDEsIC8vIGRlbGV0aW9uCiAgICAgICAgICB0cmFja1tfaiAtIDFdW19pXSArIDEsIC8vIGluc2VydGlvbgogICAgICAgICAgdHJhY2tbX2ogLSAxXVtfaSAtIDFdICsgaW5kaWNhdG9yKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciB2YWx1ZSA9IDEgLSB0cmFja1tzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdICogMiAvIChzdHIxLmxlbmd0aCArIHN0cjIubGVuZ3RoKTsKCiAgICAgIGlmICh2YWx1ZSA+IDAuNSkgewogICAgICAgIHRoaXMubGV2ZW5Xb3Jkcy5wdXNoKHN0cjEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IC8vIGNoZWNrIHN5bm9ueW0gd2l0aCB0ZXh0CgogIH0sIHsKICAgIGtleTogImNoZWNrU3lub255bSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTeW5vbnltKHRleHQsIHN5bm9ueW1zKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHN5bm9ueW1zLmxlbmd0aCA8IDEpIHJldHVybiBmYWxzZTsKCiAgICAgIGlmIChzeW5vbnltcy5pbmRleE9mKHRleHQpICE9PSAtMSkgewogICAgICAgIHN5bm9ueW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIGlmIChfdGhpczMubGV2ZW5Xb3Jkcy5pbmRleE9mKGVsZW1lbnQpID09PSAtMSkgX3RoaXMzLmxldmVuV29yZHMucHVzaChlbGVtZW50KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZ1bGxUZXh0U2VhcmNoOwp9KEJhc2VTZWFyY2gpOw=="},{"version":3,"sources":["/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/eslint-loader/index.js??ref--14-0!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/@core/libs/search.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport tinySegmenter from \"./tinySegmenter\"\nclass BaseSearch {\n    search(query = '') { }\n}\n\nexport class FullTextSearch extends BaseSearch {\n    scriptData: any\n    levenWords: any\n    constructor(scriptData: any) {\n        super()\n        this.scriptData = scriptData\n        this.levenWords = []\n    }\n    // query: text input for search\n    //tags : keyword for search\n    search(query = '', tags = []) {\n        if (query.length < 1 && tags.length === 0) {\n            return {\n                questions: this.scriptData.questions,\n                words: []\n            }\n        }\n        const words = tinySegmenter.segmentNoneSpace(query)\n        tags.forEach((element: any) => {\n            words.push(element.text)\n        });\n        const results = this.checkTextIncludeWords(words)\n        // results = results.sort((x, y) => y.weight - x.weight)\n        const questions = this.scriptData.questions.filter((x: any) => results.find((y: any) => y === x.id) !== undefined)\n        return {\n            questions,\n            words: [...words, ...this.levenWords]\n        }\n    }\n    // check document include list word \n    checkTextIncludeWords(words: any) {\n        const results = []\n        for (let i = 0; i < words.length; i++) {\n            const element = words[i];\n            const result: any = []\n            for (const word in this.scriptData.invertedIndex) {\n                const invertedData = this.scriptData.invertedIndex[word]\n                // check synonym and add synonym to list search\n                const isSynonym = this.checkSynonym(element, invertedData.synonyms)\n                if (word.includes(element) || isSynonym || this.levenshteinDistance(word, element)) {\n                    invertedData.scripts.forEach((item: any) => {\n                        const script = result.find((x: any) => x.id === item.id)\n                        if (!script) result.push(item)\n                        else if (script.weight < item.weight) script.weight = item.weight\n                    });\n                }\n            }\n            results.push(result)\n        }\n        // take the joint result part of all results\n        const expectResults = this.getGeneralItem(results)\n        expectResults.sort((a: any, b: any) => {\n            return b.weight - a.weight\n        })\n        return expectResults.map((x: any) => x.id)\n    }\n    //get documemt contains all text\n    getGeneralItem(items: any) {\n        if (items.length === 0) return []\n        if (items.length === 1) return items[0]\n        const results = []\n        for (let i = 0; i < items[0].length; i++) {\n            const element = items[0][i];\n            let isContain = true\n            for (let j = 1; j < items.length; j++) {\n                const item = items[j];\n                if (item.find((x: any) => x.id == element.id) === undefined) {\n                    isContain = false\n                    break;\n                }\n            }\n            if (isContain) results.push(element)\n        }\n        return results\n    }\n    //levenshteinDistance algorithm copy right \n    levenshteinDistance(str1 = '', str2 = '') {\n        const track = Array(str2.length + 1).fill(null).map(() =>\n            Array(str1.length + 1).fill(null));\n        for (let i = 0; i <= str1.length; i += 1) {\n            track[0][i] = i;\n        }\n        for (let j = 0; j <= str2.length; j += 1) {\n            track[j][0] = j;\n        }\n        for (let j = 1; j <= str2.length; j += 1) {\n            for (let i = 1; i <= str1.length; i += 1) {\n                const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;\n                track[j][i] = Math.min(\n                    track[j][i - 1] + 1, // deletion\n                    track[j - 1][i] + 1, // insertion\n                    track[j - 1][i - 1] + indicator, // substitution\n                );\n            }\n        }\n        const value = 1 - track[str2.length][str1.length] * 2 / (str1.length + str2.length);\n        if (value > 0.5) {\n            this.levenWords.push(str1)\n            return true\n        }\n        return false\n    }\n\n    // check synonym with text\n    checkSynonym(text: any, synonyms: any) {\n        if (synonyms.length < 1) return false\n        if (synonyms.indexOf(text) !== -1) {\n            synonyms.forEach((element: any) => {\n                if (this.levenWords.indexOf(element) === -1)\n                    this.levenWords.push(element)\n            });\n            return true\n        }\n        return false\n    }\n}"],"sourceRoot":""}]}