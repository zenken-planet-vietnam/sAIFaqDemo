{"remainingRequest":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/views/pages/Analytic.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/views/pages/Analytic.vue","mtime":1641891557488},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/cache-loader/dist/cjs.js","mtime":1638341829149},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/thread-loader/dist/cjs.js","mtime":1638341830219},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/babel-loader/lib/index.js","mtime":1638342835865},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/ts-loader/index.js","mtime":1638341829162},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/cache-loader/dist/cjs.js","mtime":1638341829149},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/vue-loader/lib/index.js","mtime":1638342838967}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQlJvdywgQkNvbCB9IGZyb20gImJvb3RzdHJhcC12dWUiOwppbXBvcnQgewogIExpbmVDaGFydCwKICBGaWx0ZXIsCiAgT3ZlcnZpZXdJdGVtLAogIFRvcFF1ZXJpZXMsCiAgVG9wUXVlc3Rpb25DbGljaywKICBSZWNlbnRRdWVyaWVzLAogIFRvcFF1ZXJpZXNOb1Jlc3VsdCwKfSBmcm9tICJAL2NvbXBvbmVudHMvYW5hbHl0aWNzIjsKaW1wb3J0IEFuYWx5dGljTWl4aW4gZnJvbSAiQC9AY29yZS9taXhpbnMvYW5hbHl0aWNNaXhpbiI7CmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgeyBtaXhpbnMgfSBmcm9tICJ2dWUtY2xhc3MtY29tcG9uZW50IjsKaW1wb3J0IHsgQW5hbHl0aWNNb2R1bGUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvYW5hbHl0aWMiOwpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBCUm93LAogICAgQkNvbCwKICAgIE92ZXJ2aWV3SXRlbSwKICAgIExpbmVDaGFydCwKICAgIFRvcFF1ZXJpZXMsCiAgICBUb3BRdWVzdGlvbkNsaWNrLAogICAgUmVjZW50UXVlcmllcywKICAgIFRvcFF1ZXJpZXNOb1Jlc3VsdCwKICAgICJwYWdlLWZpbHRlciI6IEZpbHRlciwKICB9LAp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBBbmFseXRpYyBleHRlbmRzIG1peGlucyhBbmFseXRpY01peGluKSB7CiAgZmlsdGVyOiBhbnkgPSB7CiAgICBzdGFydDogbnVsbCwKICAgIGVuZDogbnVsbCwKICB9OwogIHN0YXJ0OiBhbnkgPSBudWxsOwogIGVuZDogYW55ID0gbnVsbDsKICB0aW1lT2ZEYXkgPSAyNCAqIDYwICogNjAgKiAxMDAwOwogIHByb2R1Y3ROYW1lID0gIiBQcm9kdWN0IGRlbW8iOwogIC8vICAgZ2V0IGxpc3Qgb3ZlcnZpZXcgZGF0YQogIGdldCBvdmVydmlld0l0ZW1zKCkgewogICAgcmV0dXJuICF0aGlzLm92ZXJ2aWV3RGF0YQogICAgICA/IFtdCiAgICAgIDogWwogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogIlRvdGFsIHF1ZXJpZXMiLAogICAgICAgICAgICB2YWx1ZTogdGhpcy5vdmVydmlld0RhdGEucXVlcnkudG90YWxfcXVlcmllcywKICAgICAgICAgICAgdmFyaWFudDogImxpZ2h0LXN1Y2Nlc3MiLAogICAgICAgICAgICBpY29uOiAiU2VhcmNoSWNvbiIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogIlRvdGFsIHF1ZXJpZXMgd2l0aCBubyByZXN1bHQiLAogICAgICAgICAgICB2YWx1ZTogdGhpcy5vdmVydmlld0RhdGEucXVlcnkudG90YWxfcXVlcmllc19ub19yZXN1bHRzLAogICAgICAgICAgICB2YXJpYW50OiAibGlnaHQtZGFuZ2VyIiwKICAgICAgICAgICAgaWNvbjogIkJveEljb24iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGl0bGU6ICJUb3RhbCBxdWVzdGlvbnMgY2xpY2tlZCIsCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm92ZXJ2aWV3RGF0YS5jbGljay5xdWVzdGlvbl9jbGljawogICAgICAgICAgICAgID8gdGhpcy5vdmVydmlld0RhdGEuY2xpY2sucXVlc3Rpb25fY2xpY2sudG90YWxfY2xpY2sKICAgICAgICAgICAgICA6IDAsCiAgICAgICAgICAgIHZhcmlhbnQ6ICJsaWdodC1pbmZvIiwKICAgICAgICAgICAgaWNvbjogIlRyZW5kaW5nVXBJY29uIiwKICAgICAgICAgIH0sCiAgICAgICAgXTsKICB9CiAgLy8gZ2V0IGNoYXJ0IGRhdGEKICBnZXQgbGluZUNoYXJ0T3B0aW9uKCkgewogICAgaWYgKHRoaXMub3ZlcnZpZXdEYXRhKSB7CiAgICAgIGxldCBvcHRpb24gPSB7CiAgICAgICAgY2hhcnRPcHRpb25zOiB7CiAgICAgICAgICBjaGFydDogewogICAgICAgICAgICBpZDogIm92ZXJ2aWV3LWNoYXJ0IiwKICAgICAgICAgICAgdG9vbGJhcjogewogICAgICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHhheGlzOiB7CiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHRoaXMuZ2V0TGlzdERhdGUodGhpcy5zdGFydCwgdGhpcy5lbmQpLAogICAgICAgICAgfSwKICAgICAgICAgIHN0cm9rZTogewogICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICBjdXJ2ZTogInNtb290aCIsCiAgICAgICAgICAgIGxpbmVDYXA6ICJidXR0IiwKICAgICAgICAgICAgd2lkdGg6IDIsCiAgICAgICAgICAgIGRhc2hBcnJheTogWzAsIDIsIDBdLAogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yczogWyIjMjhjNzZmIiwgIiNlYTU0NTUiLCAiIzAwY2ZlOCJdLAogICAgICAgIH0sCiAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICJ0b3RhbCBxdWVyaWVzIiwKICAgICAgICAgICAgZGF0YTogdGhpcy5vdmVydmlld0RhdGEucXVlcnkucXVlcmllc19wZXJfZGF5LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogInRvdGFsIHF1ZXJpZXMgd2l0aCBubyByZXN1bHQiLAogICAgICAgICAgICBkYXRhOiB0aGlzLm92ZXJ2aWV3RGF0YS5xdWVyeS5xdWVyaWVzX25vX3Jlc3VsdF9wZXJfZGF5LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogInRvdGFsIHF1ZXN0aW9ucyBjbGlja2VkIiwKICAgICAgICAgICAgZGF0YTogdGhpcy5vdmVydmlld0RhdGEuY2xpY2sucXVlc3Rpb25fY2xpY2suY2xpY2tfcGVyX2RheSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgICAgcmV0dXJuIG9wdGlvbjsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KICAvLyBpbml0CiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0RGVmYXVsdElGaWx0ZXIoKTsKICAgIHRoaXMuZ2V0RGF0YSgpOwogIH0KCiAgLy8gICBzZXQgZGVmYXVsdCBzdGFydCB0aW1lLGVuZCB0aW1lCiAgcHVibGljIHNldERlZmF1bHRJRmlsdGVyKCkgewogICAgdGhpcy5maWx0ZXIuZW5kID0gbmV3IERhdGUoKTsKICAgIHRoaXMuZmlsdGVyLnN0YXJ0ID0gbmV3IERhdGUoCiAgICAgIHRoaXMuZmlsdGVyLmVuZC5nZXRUaW1lKCkgLSA2ICogdGhpcy50aW1lT2ZEYXkKICAgICk7CiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5maWx0ZXIuc3RhcnQ7CiAgICB0aGlzLmVuZCA9IHRoaXMuZmlsdGVyLmVuZDsKICB9CiAgLy8gZ2V0IGxpc3QgZGF0ZSBmcm9tIHN0YXJ0IHRvIGVuZCBkYXRlCiAgZ2V0TGlzdERhdGUoc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSkgewogICAgaWYgKCEoc3RhcnQgaW5zdGFuY2VvZiBEYXRlKSkgc3RhcnQgPSBuZXcgRGF0ZShzdGFydCk7CiAgICBpZiAoIShlbmQgaW5zdGFuY2VvZiBEYXRlKSkgZW5kID0gbmV3IERhdGUoZW5kKTsKICAgIGxldCBpdGVtcyA9IFt0aGlzLmdldERhdGVGb3JtYXRGb3JDaGFydChzdGFydCldOwogICAgbGV0IG5ld0RhdGUgPSBuZXcgRGF0ZShzdGFydC5nZXRUaW1lKCkgKyB0aGlzLnRpbWVPZkRheSk7CiAgICB3aGlsZSAobmV3RGF0ZSA8IGVuZCkgewogICAgICBpdGVtcy5wdXNoKHRoaXMuZ2V0RGF0ZUZvcm1hdEZvckNoYXJ0KG5ld0RhdGUpKTsKICAgICAgbmV3RGF0ZSA9IG5ldyBEYXRlKG5ld0RhdGUuZ2V0VGltZSgpICsgdGhpcy50aW1lT2ZEYXkpOwogICAgfQogICAgcmV0dXJuIGl0ZW1zOwogIH0KICAvLyBnZXQgZGF0ZSBmb3JtYXQgZC9tCiAgZ2V0RGF0ZUZvcm1hdEZvckNoYXJ0KGRhdGU6IERhdGUpIHsKICAgIHJldHVybiBgJHtkYXRlLmdldE1vbnRoKCkgKyAxfS8ke2RhdGUuZ2V0RGF0ZSgpfWA7CiAgfQogIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSkgewogICAgaWYgKCEoZGF0ZSBpbnN0YW5jZW9mIERhdGUpKSByZXR1cm4gZGF0ZTsKICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7ZGF0ZS5nZXRNb250aCgpICsgMX0tJHtkYXRlLmdldERhdGUoKX1gOwogIH0KICAvLyBzdWJtaXQgZmlsdGVyCiAgc3VibWl0RmlsdGVyKCkgewogICAgdGhpcy5zdGFydCA9IG5ldyBEYXRlKHRoaXMuZmlsdGVyLnN0YXJ0KTsKICAgIHRoaXMuZW5kID0gbmV3IERhdGUodGhpcy5maWx0ZXIuZW5kKTsKICAgIHRoaXMuZ2V0RGF0YSgpOwogIH0KICBnZXREYXRhKCkgewogICAgQW5hbHl0aWNNb2R1bGUuZ2V0T3ZlcnZpZXdEYXRhKHsKICAgICAgc3RhcnRfZGF0ZTogdGhpcy5mb3JtYXREYXRlKHRoaXMuc3RhcnQpLAogICAgICBlbmRfZGF0ZTogdGhpcy5mb3JtYXREYXRlKHRoaXMuZW5kKSwKICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["Analytic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Analytic.vue","sourceRoot":"src/views/pages","sourcesContent":["<template lang=\"\">\n    <div v-if=\"overviewData\" class=\"analytic card\">\n        <div class=\"title\">\n            {{'Statictics'}}\n        </div>\n        <b-row class=\"mt-2\">\n            <b-col md=\"4\">\n                <span class=\"font-weight-500\">\n                   {{productName}}\n                </span>\n            </b-col>\n            <b-col class=\"filter\" md=\"8\">\n                <page-filter @submit=\"submitFilter\" :filter=\"filter\"/>\n            </b-col>\n        </b-row>\n       <b-row class=\"mt-3 total-overview\">\n           <b-col md=\"4\">\n               <overview-item v-for=\"item,index in overviewItems\" :key=\"index\" :item=\"item\" />\n           </b-col>\n           <b-col md=\"8\">\n                <line-chart :data=\"lineChartOption\"/>\n           </b-col>\n       </b-row>\n       <b-row class=\"mt-3\">\n            <b-col md=\"6\">\n                <top-queries class=\"table-card\" :items=\"overviewData.query.top_queries\"/>\n            </b-col>\n            <b-col  md=\"6\">\n               <top-queries-no-result class=\"table-card\" :items=\"overviewData.query.top_no_result_queries\"/>\n            </b-col>\n       </b-row>\n       <b-row class=\"mt-3\">\n          <b-col  md=\"6\">\n                <top-question-click class=\"table-card\" :items=\"overviewData.click.question_click?overviewData.click.question_click.top_clicks:[]\"/>\n          </b-col>\n          <b-col  md=\"6\">\n                <recent-queries class=\"table-card\" :items=\"overviewData.query.recent_queries\"/> \n          </b-col>\n       </b-row>\n    </div>\n</template>\n<script lang=\"ts\">\nimport { BRow, BCol } from \"bootstrap-vue\";\nimport {\n  LineChart,\n  Filter,\n  OverviewItem,\n  TopQueries,\n  TopQuestionClick,\n  RecentQueries,\n  TopQueriesNoResult,\n} from \"@/components/analytics\";\nimport AnalyticMixin from \"@/@core/mixins/analyticMixin\";\nimport { Component } from \"vue-property-decorator\";\nimport { mixins } from \"vue-class-component\";\nimport { AnalyticModule } from \"@/store/modules/analytic\";\n@Component({\n  components: {\n    BRow,\n    BCol,\n    OverviewItem,\n    LineChart,\n    TopQueries,\n    TopQuestionClick,\n    RecentQueries,\n    TopQueriesNoResult,\n    \"page-filter\": Filter,\n  },\n})\nexport default class Analytic extends mixins(AnalyticMixin) {\n  filter: any = {\n    start: null,\n    end: null,\n  };\n  start: any = null;\n  end: any = null;\n  timeOfDay = 24 * 60 * 60 * 1000;\n  productName = \" Product demo\";\n  //   get list overview data\n  get overviewItems() {\n    return !this.overviewData\n      ? []\n      : [\n          {\n            title: \"Total queries\",\n            value: this.overviewData.query.total_queries,\n            variant: \"light-success\",\n            icon: \"SearchIcon\",\n          },\n          {\n            title: \"Total queries with no result\",\n            value: this.overviewData.query.total_queries_no_results,\n            variant: \"light-danger\",\n            icon: \"BoxIcon\",\n          },\n          {\n            title: \"Total questions clicked\",\n            value: this.overviewData.click.question_click\n              ? this.overviewData.click.question_click.total_click\n              : 0,\n            variant: \"light-info\",\n            icon: \"TrendingUpIcon\",\n          },\n        ];\n  }\n  // get chart data\n  get lineChartOption() {\n    if (this.overviewData) {\n      let option = {\n        chartOptions: {\n          chart: {\n            id: \"overview-chart\",\n            toolbar: {\n              show: false,\n            },\n          },\n          xaxis: {\n            categories: this.getListDate(this.start, this.end),\n          },\n          stroke: {\n            show: true,\n            curve: \"smooth\",\n            lineCap: \"butt\",\n            width: 2,\n            dashArray: [0, 2, 0],\n          },\n          colors: [\"#28c76f\", \"#ea5455\", \"#00cfe8\"],\n        },\n        series: [\n          {\n            name: \"total queries\",\n            data: this.overviewData.query.queries_per_day,\n          },\n          {\n            name: \"total queries with no result\",\n            data: this.overviewData.query.queries_no_result_per_day,\n          },\n          {\n            name: \"total questions clicked\",\n            data: this.overviewData.click.question_click.click_per_day,\n          },\n        ],\n      };\n      return option;\n    }\n    return null;\n  }\n  // init\n  created() {\n    this.setDefaultIFilter();\n    this.getData();\n  }\n\n  //   set default start time,end time\n  public setDefaultIFilter() {\n    this.filter.end = new Date();\n    this.filter.start = new Date(\n      this.filter.end.getTime() - 6 * this.timeOfDay\n    );\n    this.start = this.filter.start;\n    this.end = this.filter.end;\n  }\n  // get list date from start to end date\n  getListDate(start: Date, end: Date) {\n    if (!(start instanceof Date)) start = new Date(start);\n    if (!(end instanceof Date)) end = new Date(end);\n    let items = [this.getDateFormatForChart(start)];\n    let newDate = new Date(start.getTime() + this.timeOfDay);\n    while (newDate < end) {\n      items.push(this.getDateFormatForChart(newDate));\n      newDate = new Date(newDate.getTime() + this.timeOfDay);\n    }\n    return items;\n  }\n  // get date format d/m\n  getDateFormatForChart(date: Date) {\n    return `${date.getMonth() + 1}/${date.getDate()}`;\n  }\n  formatDate(date: Date) {\n    if (!(date instanceof Date)) return date;\n    return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n  }\n  // submit filter\n  submitFilter() {\n    this.start = new Date(this.filter.start);\n    this.end = new Date(this.filter.end);\n    this.getData();\n  }\n  getData() {\n    AnalyticModule.getOverviewData({\n      start_date: this.formatDate(this.start),\n      end_date: this.formatDate(this.end),\n    });\n  }\n}\n</script>\n<style lang=\"scss\">\n.analytic {\n  .title {\n    font-size: 21px;\n    font-weight: 600;\n  }\n  .table-card {\n    background: #fafbfd;\n    padding: 1rem;\n    border-radius: 0.5rem;\n    height: 100%;\n    .table-content {\n      max-height: 250px;\n      overflow: auto;\n    }\n  }\n}\n</style>"]}]}