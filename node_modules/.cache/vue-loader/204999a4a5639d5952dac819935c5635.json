{"remainingRequest":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/components/questions/SearchForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/src/components/questions/SearchForm.vue","mtime":1641893387079},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/cache-loader/dist/cjs.js","mtime":1638341829149},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/thread-loader/dist/cjs.js","mtime":1638341830219},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/babel-loader/lib/index.js","mtime":1638342835865},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/cache-loader/dist/cjs.js","mtime":1638341829149},{"path":"/Users/thainguyentan/Documents/ZENKEN-PLANET/sAIFaqDemo/node_modules/vue-loader/lib/index.js","mtime":1638342838967}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEJGb3JtSW5wdXQgfSBmcm9tICJib290c3RyYXAtdnVlIjsKaW1wb3J0IFNlYXJjaFJlc3VsdCBmcm9tICIuL1NlYXJjaFJlc3VsdC52dWUiOwppbXBvcnQgUGFnZU1peGluIGZyb20gIkAvQGNvcmUvbWl4aW5zL3NlYXJjaERhdGFNaXhpbiI7CmltcG9ydCBUYWcgZnJvbSAiLi9UYWcudnVlIjsKaW1wb3J0IEF1dG9Db21wbGV0ZUlucHV0IGZyb20gIi4vQXV0b0NvbXBsZXRlSW5wdXQudnVlIjsKaW1wb3J0IHsgUGFnZU1vZHVsZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy9wYWdlIjsKaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCB7IG1peGlucyB9IGZyb20gInZ1ZS1jbGFzcy1jb21wb25lbnQiOwpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBCRm9ybUlucHV0LAogICAgU2VhcmNoUmVzdWx0LAogICAgVGFnLAogICAgQXV0b0NvbXBsZXRlSW5wdXQsCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICBQYWdlTW9kdWxlLnVwZGF0ZVByb2Nlc3MoZmFsc2UpOwogIH0sCn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlYXJjaEZvcm0gZXh0ZW5kcyBtaXhpbnMoUGFnZU1peGluKSB7CiAgdGV4dCA9ICIiOwogIGdldCBzZWxlY3RlZFRhZ3MoKSB7CiAgICByZXR1cm4gdGhpcy50YWdzLmZpbHRlcigoeCkgPT4geC5pc1NlbGVjdGVkID09IHRydWUpOwogIH0KCiAgb25JbnB1dEZvY3VzKGV2ZW50KSB7CiAgICBpZiAoIXRoaXMuY29uZmlnLlNFQVJDSF9CVVRUT04pIHsKICAgICAgUGFnZU1vZHVsZS51cGRhdGVQcm9jZXNzKGV2ZW50LmlzVHJ1c3RlZCk7CiAgICAgIGlmICghdGhpcy5jb25maWcuU0VBUkNIX0JVVFRPTikgewogICAgICAgIGxldCByZWN0ID0gdGhpcy4kcmVmcy5pbnB1dC4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgbGV0IG1heEhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC0gcmVjdC55OwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMucmVzdWx0LiRlbC5zdHlsZS5tYXhIZWlnaHQgPQogICAgICAgICAgICBtYXhIZWlnaHQgLSByZWN0LmhlaWdodCAtIDEwICsgInB4IjsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KICAvLyBmaWx0ZXIgcXVlc3Rpb24KICBvblRleHRDaGFuZ2UoKSB7CiAgICBpZiAoIXRoaXMuY29uZmlnLlNFQVJDSF9CVVRUT04pIHRoaXMuc3VibWl0KCk7CiAgfQogIGFzeW5jIHN1Ym1pdCgpIHsKICAgIGxldCB0ZXh0ID0gdGhpcy50ZXh0LnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgUGFnZU1vZHVsZS51cGRhdGVQcm9jZXNzKHRydWUpOwogICAgbGV0IHJlc3VsdCA9IGF3YWl0IFBhZ2VNb2R1bGUuZmlsdGVyUXVlc3Rpb25zKHRleHQpOwogICAgLy8gY2FsbCBhbmFseXRpY3MgYXBpCiAgICBpZiAod2luZG93LnNhICYmIHRleHQubGVuZ3RoID4gMCkgewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBldmVudF9uYW1lOiAicXVlc3Rpb25fcXVlcnkiLAogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBxdWVyeTogdGV4dCwKICAgICAgICAgIHJlc3VsdDogcmVzdWx0Lmxlbmd0aCwKICAgICAgICB9LAogICAgICB9OwogICAgICB3aW5kb3cuc2Euc2VuZChkYXRhKTsKICAgIH0KICB9CiAgb25EZWxldGVUZXh0KGV2ZW50KSB7CiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICBsZXQgc2VsZWN0ZWRUYWdzID0gdGhpcy50YWdzLmZpbHRlcigoeCkgPT4geC5pc1NlbGVjdGVkKS5yZXZlcnNlKCk7CiAgICAgIGxldCBsYXN0U2VsZWN0ZWRUYWcgPSBzZWxlY3RlZFRhZ3MuZmluZCgoeCkgPT4geC5pc1NlbGVjdGVkKTsKICAgICAgaWYgKGxhc3RTZWxlY3RlZFRhZykgewogICAgICAgIFBhZ2VNb2R1bGUudXBkYXRlVGFnRmlsdGVyKHsKICAgICAgICAgIHRleHQ6IGxhc3RTZWxlY3RlZFRhZy50ZXh0LAogICAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["SearchForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchForm.vue","sourceRoot":"src/components/questions","sourcesContent":["<template lang=\"\">\n    <div class=\"search-form\">\n       <div class=\"search-container\">\n          <div class=\"search\">\n          <div v-if=\"selectedTags.length>0\" class=\"search-tags\">\n           <tag :tags=\"selectedTags\" :isSelectedTag=\"true\" />\n          </div>\n          <!-- <b-form-input v-model='text' @keyup.enter=\"submit\"  @keyup.delete=\"onDeleteText\" ref=\"input\" @input=\"onTextChange\" class=\"search-input\" @focus=\"onInputFocus\"  placeholder=\"What is your question?\"/> -->\n          <auto-complete-input v-model='text' @enter=\"submit\"  @delete=\"onDeleteText\" ref=\"input\" @input=\"onTextChange\" class=\"search-input\" @focus=\"onInputFocus\"  placeholder=\"What is your question?\"/>\n        </div>\n         <div v-if=\"config.SEARCH_BUTTON\" @click=\"submit\" class=\"search-button\"> \n            <feather-icon icon=\"SearchIcon\"></feather-icon>\n          </div>\n       </div>\n        <search-result ref=\"result\" v-if=\"searchProcess\"/>\n    </div>\n</template>\n<script>\nimport { BFormInput } from \"bootstrap-vue\";\nimport SearchResult from \"./SearchResult.vue\";\nimport PageMixin from \"@/@core/mixins/searchDataMixin\";\nimport Tag from \"./Tag.vue\";\nimport AutoCompleteInput from \"./AutoCompleteInput.vue\";\nimport { PageModule } from \"@/store/modules/page\";\nimport { Component } from \"vue-property-decorator\";\nimport { mixins } from \"vue-class-component\";\n@Component({\n  components: {\n    BFormInput,\n    SearchResult,\n    Tag,\n    AutoCompleteInput,\n  },\n  destroyed() {\n    PageModule.updateProcess(false);\n  },\n})\nexport default class SearchForm extends mixins(PageMixin) {\n  text = \"\";\n  get selectedTags() {\n    return this.tags.filter((x) => x.isSelected == true);\n  }\n\n  onInputFocus(event) {\n    if (!this.config.SEARCH_BUTTON) {\n      PageModule.updateProcess(event.isTrusted);\n      if (!this.config.SEARCH_BUTTON) {\n        let rect = this.$refs.input.$el.getBoundingClientRect();\n        // eslint-disable-next-line no-unused-vars\n        let maxHeight = document.body.clientHeight - rect.y;\n        this.$nextTick(() => {\n          this.$refs.result.$el.style.maxHeight =\n            maxHeight - rect.height - 10 + \"px\";\n        });\n      }\n    }\n  }\n  // filter question\n  onTextChange() {\n    if (!this.config.SEARCH_BUTTON) this.submit();\n  }\n  async submit() {\n    let text = this.text.toLowerCase().trim();\n    PageModule.updateProcess(true);\n    let result = await PageModule.filterQuestions(text);\n    // call analytics api\n    if (window.sa && text.length > 0) {\n      let data = {\n        event_name: \"question_query\",\n        value: {\n          query: text,\n          result: result.length,\n        },\n      };\n      window.sa.send(data);\n    }\n  }\n  onDeleteText(event) {\n    if (event.target.value.length === 0) {\n      let selectedTags = this.tags.filter((x) => x.isSelected).reverse();\n      let lastSelectedTag = selectedTags.find((x) => x.isSelected);\n      if (lastSelectedTag) {\n        PageModule.updateTagFilter({\n          text: lastSelectedTag.text,\n          isSelected: false,\n        });\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.search-form {\n  position: relative;\n  .search-container {\n    display: flex;\n    border: 1px solid #ced4da;\n    border-radius: 0.25rem;\n    .search {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      background: white;\n      border-radius: 0.25rem;\n      .search-input {\n        border: 0px;\n        box-shadow: none !important;\n      }\n    }\n    .search-button {\n      cursor: pointer;\n      background: #0062cc;\n      flex: 0 0 auto;\n      height: 38px;\n      width: 40px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      color: #fff;\n      border-radius: 0rem 0.25rem 0.25rem 0rem;\n      &:hover {\n        background: #0069d9;\n      }\n    }\n  }\n}\n</style>"]}]}